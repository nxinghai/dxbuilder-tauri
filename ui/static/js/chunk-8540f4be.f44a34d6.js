(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-8540f4be"],{"21f2":function(e,t,r){"use strict";r.d(t,"b",(function(){return i})),r.d(t,"a",(function(){return l}));var o=r("720d"),s=r.n(o),a="MFwwDQYJKoZIhvcNAQEBBQADSwAwSAJBAKoR8mX0rGKLqzcWmOzbfj64K8ZIgOdH\nnzkXSOVOZbFu/TJhZ7rFAN+eaGkl3C4buccQd/EjEsj9ir7ijT7h96MCAwEAAQ==",n="MIIBVAIBADANBgkqhkiG9w0BAQEFAASCAT4wggE6AgEAAkEAqhHyZfSsYourNxaY\n7Nt+PrgrxkiA50efORdI5U5lsW79MmFnusUA355oaSXcLhu5xxB38SMSyP2KvuKN\nPuH3owIDAQABAkAfoiLyL+Z4lf4Myxk6xUDgLaWGximj20CUf+5BKKnlrK+Ed8gA\nkM0HqoTt2UZwA5E2MzS4EI2gjfQhz5X28uqxAiEA3wNFxfrCZlSZHb0gn2zDpWow\ncSxQAgiCstxGUoOqlW8CIQDDOerGKH5OmCJ4Z21v+F25WaHYPxCFMvwxpcw99Ecv\nDQIgIdhDTIqD2jfYjPTY8Jj3EDGPbH2HHuffvflECt3Ek60CIQCFRlCkHpi7hthh\nYhovyloRYsM+IS9h/0BzlEAuO0ktMQIgSPT3aFAgJYwKpqRYKlLDVcflZFCKY7u3\nUP8iWi1Qw0Y=";function i(e){var t=new s.a;return t.setPublicKey(a),t.encrypt(e)}function l(e){var t=new s.a;return t.setPrivateKey(n),t.decrypt(e)}},2912:function(e,t,r){},c0c7:function(e,t,r){"use strict";r.d(t,"g",(function(){return a})),r.d(t,"e",(function(){return n})),r.d(t,"a",(function(){return i})),r.d(t,"j",(function(){return l})),r.d(t,"c",(function(){return c})),r.d(t,"d",(function(){return u})),r.d(t,"h",(function(){return d})),r.d(t,"b",(function(){return m})),r.d(t,"f",(function(){return p})),r.d(t,"k",(function(){return g})),r.d(t,"l",(function(){return f})),r.d(t,"m",(function(){return h})),r.d(t,"i",(function(){return b}));var o=r("b775"),s=r("c38a");function a(e){return Object(o["a"])({url:"/system/user/list",method:"get",params:e})}function n(e){return Object(o["a"])({url:"/system/user/"+Object(s["e"])(e),method:"get"})}function i(e){return Object(o["a"])({url:"/system/user",method:"post",data:e})}function l(e){return Object(o["a"])({url:"/system/user",method:"put",data:e})}function c(e){return Object(o["a"])({url:"/system/user/"+e,method:"delete"})}function u(e){return Object(o["a"])({url:"/system/user/export",method:"get",params:e})}function d(e,t){var r={userId:e,password:t};return Object(o["a"])({url:"/system/user/resetPwd",method:"put",data:r})}function m(e,t){var r={userId:e,status:t};return Object(o["a"])({url:"/system/user/changeStatus",method:"put",data:r})}function p(){return Object(o["a"])({url:"/system/user/profile",method:"get"})}function g(e){return Object(o["a"])({url:"/system/user/profile",method:"put",data:e})}function f(e,t){var r={oldPassword:e,newPassword:t};return Object(o["a"])({url:"/system/user/profile/updatePwd",method:"put",params:r})}function h(e){return Object(o["a"])({url:"/system/user/profile/avatar",method:"post",data:e})}function b(e){return Object(o["a"])({url:"/system/user/profile/updatePwdBytel",method:"put",params:e})}},dd7b:function(e,t,r){"use strict";r.r(t);var o=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"login"},[r("el-form",{ref:"loginForm",staticClass:"login-form",attrs:{model:e.loginForm,rules:e.loginRules}},[r("h3",{staticClass:"title"},[e._v("TeamDesigner团队协作")]),r("el-tabs",{attrs:{type:"card"},on:{"tab-click":e.tabHandleClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[r("el-tab-pane",{attrs:{label:"个人版",name:"first"}}),r("el-tab-pane",{attrs:{label:"企业版",name:"second"}})],1),1==e.company?r("el-form-item",{attrs:{prop:"orgCode"}},[r("el-input",{attrs:{type:"text","auto-complete":"off",placeholder:"企业代码"},model:{value:e.tempOrgCode,callback:function(t){e.tempOrgCode=t},expression:"tempOrgCode"}},[r("svg-icon",{staticClass:"el-input__icon input-icon",attrs:{slot:"prefix","icon-class":"tree"},slot:"prefix"})],1)],1):e._e(),r("el-form-item",{attrs:{prop:"username"}},[r("el-input",{attrs:{type:"text","auto-complete":"off",placeholder:"登录邮箱"},model:{value:e.loginForm.username,callback:function(t){e.$set(e.loginForm,"username",t)},expression:"loginForm.username"}},[r("svg-icon",{staticClass:"el-input__icon input-icon",attrs:{slot:"prefix","icon-class":"user"},slot:"prefix"})],1)],1),r("el-form-item",{attrs:{prop:"password"}},[r("el-input",{attrs:{type:"password","auto-complete":"off",placeholder:"密码"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleLogin(t)}},model:{value:e.loginForm.password,callback:function(t){e.$set(e.loginForm,"password",t)},expression:"loginForm.password"}},[r("svg-icon",{staticClass:"el-input__icon input-icon",attrs:{slot:"prefix","icon-class":"password"},slot:"prefix"})],1)],1),r("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.loginForm.captchaEnabled,expression:"loginForm.captchaEnabled"}],attrs:{prop:"code"}},[r("el-input",{staticStyle:{width:"63%"},attrs:{"auto-complete":"off",placeholder:"验证码"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleLogin(t)}},model:{value:e.loginForm.code,callback:function(t){e.$set(e.loginForm,"code",t)},expression:"loginForm.code"}},[r("svg-icon",{staticClass:"el-input__icon input-icon",attrs:{slot:"prefix","icon-class":"validCode"},slot:"prefix"})],1),r("div",{staticClass:"login-code"},[r("img",{staticClass:"login-code-img",attrs:{src:e.codeUrl},on:{click:e.getCode}})])],1),r("el-checkbox",{staticStyle:{margin:"0px 0px 25px 0px"},model:{value:e.loginForm.rememberMe,callback:function(t){e.$set(e.loginForm,"rememberMe",t)},expression:"loginForm.rememberMe"}},[e._v("记住密码")]),r("el-form-item",{staticStyle:{width:"100%"}},[r("el-button",{staticStyle:{width:"100%"},attrs:{loading:e.loading,size:"medium",type:"primary"},nativeOn:{click:function(t){return t.preventDefault(),e.handleLogin(t)}}},[e.loading?r("span",[e._v("登 录 中...")]):r("span",[e._v("登 录")])])],1),r("div",{directives:[{name:"show",rawName:"v-show",value:e.personal,expression:"personal"}],staticClass:"left",on:{click:e.openregister}},[r("span",[e._v("个人注册")])]),r("div",{directives:[{name:"show",rawName:"v-show",value:e.company,expression:"company"}],staticClass:"left",on:{click:e.companyRegister}},[r("span",[e._v("团队注册")])]),r("div",{staticClass:"right",on:{click:e.forgetPassword}},[r("span",[e._v("忘记密码")])])],1),r("div",{staticClass:"el-login-footer"},[r("span",[e._v("QQ技术交流群：30740193 ")]),r("span",[r("el-link",{attrs:{type:"primary",icon:"el-icon-chat-line-round",href:"https://support.qq.com/product/371996",target:"_blank"}},[e._v("吐槽几句")])],1)]),r("el-dialog",{attrs:{title:e.title,visible:e.open,width:"600px","append-to-body":""},on:{"update:visible":function(t){e.open=t}}},[r("el-form",{ref:"form",attrs:{model:e.registerForm,rules:e.registerRules,"label-width":"100px"}},[r("el-row",[r("el-col",{attrs:{span:24}},[1==e.company?r("el-form-item",{attrs:{label:"企业名称",prop:"orgName"}},[r("el-input",{attrs:{placeholder:"请输入企业或团队名称"},model:{value:e.registerForm.orgName,callback:function(t){e.$set(e.registerForm,"orgName",t)},expression:"registerForm.orgName"}})],1):e._e()],1),r("el-col",{attrs:{span:24}},[r("el-form-item",{attrs:{label:"用户姓名",prop:"nickName"}},[r("el-input",{attrs:{placeholder:"请输入用户姓名"},model:{value:e.registerForm.nickName,callback:function(t){e.$set(e.registerForm,"nickName",t)},expression:"registerForm.nickName"}})],1)],1),r("el-col",{attrs:{span:24}},[r("el-form-item",{attrs:{label:"注册邮箱",prop:"userName"}},[r("el-input",{attrs:{placeholder:"请输入邮箱"},on:{input:e.isEmail},model:{value:e.registerForm.userName,callback:function(t){e.$set(e.registerForm,"userName",t)},expression:"registerForm.userName"}})],1)],1),r("el-col",{attrs:{span:24}},[r("el-form-item",{attrs:{label:"用户密码",prop:"password"}},[r("el-input",{attrs:{type:"password",placeholder:"请输入用户密码"},model:{value:e.registerForm.password,callback:function(t){e.$set(e.registerForm,"password",t)},expression:"registerForm.password"}})],1)],1),r("el-col",{attrs:{span:24}},[r("el-form-item",{attrs:{label:"确认密码",prop:"comfirmpassword"}},[r("el-input",{attrs:{type:"password",placeholder:"请再次输入用户密码"},model:{value:e.registerForm.comfirmpassword,callback:function(t){e.$set(e.registerForm,"comfirmpassword",t)},expression:"registerForm.comfirmpassword"}})],1)],1)],1)],1),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{attrs:{type:"primary"},on:{click:e.register}},[e._v("注 册")]),r("el-button",{on:{click:e.cancel}},[e._v("取 消")])],1)],1),r("el-dialog",{attrs:{title:"找回密码",visible:e.forget,width:"500px","append-to-body":""},on:{"update:visible":function(t){e.forget=t}}},[r("el-form",{ref:"forform",attrs:{model:e.forgetForm,"label-width":"150px",rules:e.forgetRules}},[r("el-form-item",{attrs:{prop:"email",label:"用户邮箱"}},[r("el-input",{attrs:{placeholder:"请输入注册时的邮箱",clearable:""},model:{value:e.forgetForm.email,callback:function(t){e.$set(e.forgetForm,"email",t)},expression:"forgetForm.email"}})],1),r("el-form-item",{attrs:{prop:"orgCode",label:"企业代码"}},[r("el-input",{attrs:{placeholder:"企业版找回必填",clearable:""},model:{value:e.forgetForm.orgCode,callback:function(t){e.$set(e.forgetForm,"orgCode",t)},expression:"forgetForm.orgCode"}})],1),r("el-form-item",[r("el-button",{attrs:{type:"cyan"},on:{click:e.handleForget}},[e._v("确定")])],1),r("el-form-item",[r("span",[e._v(e._s(e.successmessage))])])],1)],1),r("el-dialog",{attrs:{title:"修改密码",visible:e.updatePass,width:"500px","append-to-body":""},on:{"update:visible":function(t){e.updatePass=t}}},[r("el-form",{ref:"uppassForm",attrs:{model:e.updatePassForm,inline:!0,"label-width":"98px",rules:e.updatePassRules}},[r("el-form-item",{attrs:{prop:"telPhone",label:"账号"}},[r("el-input",{attrs:{placeholder:"请输入要找回的账号",disabled:!0},model:{value:e.updatePassForm.telPhone,callback:function(t){e.$set(e.updatePassForm,"telPhone",t)},expression:"updatePassForm.telPhone"}})],1),r("el-form-item",{attrs:{prop:"checkCode",label:"验证码"}},[r("el-input",{attrs:{placeholder:"请输入验证码",clearable:""},model:{value:e.updatePassForm.checkCode,callback:function(t){e.$set(e.updatePassForm,"checkCode",t)},expression:"updatePassForm.checkCode"}})],1),r("el-link",{attrs:{type:"primary"},on:{click:e.sendMsg}},[e._v(e._s(e.codeMsg))]),r("el-form-item",{attrs:{prop:"newPassword",label:"新密码"}},[r("el-input",{attrs:{type:"password",placeholder:"请输入新密码",clearable:""},model:{value:e.updatePassForm.newPassword,callback:function(t){e.$set(e.updatePassForm,"newPassword",t)},expression:"updatePassForm.newPassword"}})],1),r("el-form-item",{attrs:{prop:"checkPassword",label:"确认密码"}},[r("el-input",{attrs:{type:"password",placeholder:"请再次输入新密码",clearable:""},model:{value:e.updatePassForm.checkPassword,callback:function(t){e.$set(e.updatePassForm,"checkPassword",t)},expression:"updatePassForm.checkPassword"}})],1)],1),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{attrs:{type:"primary"},on:{click:e.updatePassSave}},[e._v("确 定")])],1)],1)],1)},s=[],a=(r("ac1f"),r("00b4"),r("b64b"),r("b0c0"),r("7ded")),n=r("a78e"),i=r.n(n),l=r("21f2"),c=r("f53b"),u=r("c0c7"),d={name:"Login",data:function(){var e=this,t=/^(\w-*\.*)+@(\w-?)+(\.\w{2,})+$/,r=function(e,r,o){""===r||void 0===r?o(new Error("注册帐号不能为空")):t.test(r)?o():o(new Error("注册邮箱不正确"))},o=function(t,r,o){""===r||void 0===r?o(new Error("请再次输入密码")):r!==e.registerForm.password?o(new Error("两次输入密码不一致!")):o()},s=function(t,r,o){""===r||void 0===r?o(new Error("请再次输入新密码")):r!==e.updatePassForm.newPassword?o(new Error("两次输入密码不一致!")):o()};return{tempOrgCode:null,activeName:"first",company:!1,personal:!0,codeUrl:"",cookiePassword:"",loginForm:{username:"",password:"",rememberMe:!1,captchaEnabled:!0,code:"",uuid:"",orgCode:null},successmessage:"",forgetForm:{},updatePassForm:{},loginRules:{username:[{required:!0,trigger:"blur",message:"登录邮箱不能为空（没有帐号先注册）"}],password:[{required:!0,trigger:"blur",message:"密码不能为空"}],code:[{required:!0,trigger:"change",message:"验证码不能为空"}],orgCode:[{required:!0,trigger:"change",message:"企业代码不能为空"}]},loading:!1,redirect:void 0,open:!1,forget:!1,updatePass:!1,title:"用户注册",codeMsg:"获取验证码",registerForm:{email:""},registerRules:{nickName:[{required:!0,trigger:"blur",message:"用户姓名不能为空"}],userName:[{validator:r,trigger:"blur"},{required:!0,trigger:"blur",message:"注册邮箱不能为空"}],password:[{required:!0,trigger:"blur",message:"密码不能为空"}],comfirmpassword:[{validator:o,trigger:"blur"},{required:!0,trigger:"blur",message:"请再次输入密码"}],orgName:[{required:!0,trigger:"blur",message:"企业名称不能为空"}]},forgetRules:{email:[{required:!0,trigger:"blur",message:"用户邮箱不能为空"}]},updatePassRules:{telPhone:[{required:!0,trigger:"blur",message:"手机号不能为空"}],checkCode:[{required:!0,trigger:"blur",message:"验证码不能为空"}],newPassword:[{required:!0,trigger:"blur",message:"新密码不能为空"}],checkPassword:[{validator:s,trigger:"blur"},{required:!0,trigger:"blur",message:"请再次输入新密码"}]}}},watch:{$route:{handler:function(e){this.redirect=e.query&&e.query.redirect},immediate:!0}},created:function(){this.getCode(),this.getCookie()},methods:{getCode:function(){var e=this;Object(a["a"])().then((function(t){e.codeUrl="data:image/gif;base64,"+t.img,e.loginForm.uuid=t.uuid,e.loginForm.captchaEnabled=JSON.parse(t.captchaEnabled),0==JSON.parse(t.captchaEnabled)&&(e.loginRules.code="")}))},getCookie:function(){var e=i.a.get("username"),t=i.a.get("password"),r=i.a.get("rememberMe");this.loginForm={username:void 0===e?this.loginForm.username:e,password:void 0===t?this.loginForm.password:Object(l["a"])(t),rememberMe:void 0!==r&&Boolean(r),orgCode:null}},handleLogin:function(){var e=this;this.loginForm.orgCode=this.tempOrgCode,this.$refs.loginForm.validate((function(t){t&&(e.loading=!0,e.loginForm.rememberMe?(i.a.set("username",e.loginForm.username,{expires:30}),i.a.set("password",Object(l["b"])(e.loginForm.password),{expires:30}),e.company&&i.a.set("orgCode",e.loginForm.orgCode,{expires:30}),i.a.set("rememberMe",e.loginForm.rememberMe,{expires:30})):(i.a.remove("username"),i.a.remove("password"),i.a.remove("orgCode"),i.a.remove("rememberMe")),e.$store.dispatch("Login",e.loginForm).then((function(t){e.$router.push({path:e.redirect||"/"}),e.company?e.addOperLog({title:"企业版登录"}).then((function(e){})):e.addOperLog({title:"个人版登录"}).then((function(e){}))})).catch((function(){e.loading=!1,e.getCode()})))}))},register:function(){var e=this;this.$refs.form.validate((function(t){t&&Object(a["e"])(e.registerForm).then((function(t){200===t.code&&(e.company?e.$message({showClose:!0,message:"注册成功，企业代码已发至注册邮箱，请前往注册邮箱进行激活",type:"success",duration:6e3}):e.msgSuccess("注册成功"),e.open=!1)}))}))},cancel:function(){this.open=!1,this.forget=!1},openregister:function(){this.registerForm={},this.title="个人版注册",this.open=!0},companyRegister:function(){this.registerForm={},this.title="团队版注册",this.open=!0},forgetPassword:function(){this.forgetForm={},this.successmessage="",this.forget=!0},handleForget:function(){var e=this;this.$refs.forform.validate((function(t){t&&Object(c["a"])(e.forgetForm).then((function(t){e.successmessage=t.msg}))}))},updatePassSave:function(){var e=this;this.$refs.uppassForm.validate((function(t){t&&Object(u["i"])(e.updatePassForm).then((function(t){200===t.code&&(e.msgSuccess("修改成功"),e.updatePass=!1)}))}))},isEmail:function(){this.registerForm.email="";var e=/^(\w-*\.*)+@(\w-?)+(\.\w{2,})+$/;e.test(this.registerForm.userName)&&(this.registerForm.email=this.registerForm.userName)},sendMsg:function(){this.codeMsg="已发送",console.log(1111)},tabHandleClick:function(e,t){if("second"==e.name){var r=i.a.get("orgCode");this.personal=!1,this.company=!0,this.tempOrgCode="undefined"!=r&&"null"!=r?r:null}else this.company=!1,this.personal=!0,this.tempOrgCode=null}}},m=d,p=(r("eecc"),r("2877")),g=Object(p["a"])(m,o,s,!1,null,null,null);t["default"]=g.exports},eecc:function(e,t,r){"use strict";r("2912")},f53b:function(e,t,r){"use strict";r.d(t,"a",(function(){return s})),r.d(t,"b",(function(){return a}));var o=r("b775");function s(e){return Object(o["a"])({url:"/db/passwork/insert",method:"post",data:e})}function a(e,t){return Object(o["a"])({url:"/db/passwork/update/"+e,method:"put",data:t})}}}]);